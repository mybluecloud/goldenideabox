var Login=function(){var a=function(){$(".login-form").validate({errorElement:"span",errorClass:"help-block",focusInvalid:false,rules:{account:{required:true},password:{required:true},remember:{required:false}},messages:{account:{required:"Account is required."},password:{required:"Password is required."}},invalidHandler:function(c,b){$(".alert-danger",$(".login-form")).show()},highlight:function(b){$(b).closest(".form-group").addClass("has-error")},success:function(b){b.closest(".form-group").removeClass("has-error");b.remove()},errorPlacement:function(b,c){b.insertAfter(c.closest(".input-icon"))},submitHandler:function(b){b.submit();$.ajax({type:"post",url:"login",data:{account:$("#account").val(),password:$("#password").val()},dataType:"json",success:function(c){if(c=="0"){window.location.href="index"}else{alert("用户名或密码错误")}}})}});$(".login-form input").keypress(function(b){if(b.which==13){if($(".login-form").validate().form()){$(".login-form").submit()}return false}});$(".forget-form input").keypress(function(b){if(b.which==13){if($(".forget-form").validate().form()){$(".forget-form").submit()}return false}});$("#forget-password").click(function(){$(".login-form").hide();$(".forget-form").show()});$("#back-btn").click(function(){$(".login-form").show();$(".forget-form").hide()})};return{init:function(){a();$(".login-bg").backstretch(["/pages/img/login/bg1.jpg","/pages/img/login/bg2.jpg","/pages/img/login/bg3.jpg"],{fade:1000,duration:8000});$(".forget-form").hide()}}}();jQuery(document).ready(function(){Login.init()});